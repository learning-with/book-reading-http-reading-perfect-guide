# 19. 배포 시스템
웹의 암흑기(약 1995년도)에는 HTML을 텍스트 편집기에서 수작업으로 개발하고 FTP를 통해 웹 서버에 콘텐츠를 직접 올려 고통스럽고 협업하기 어려웠으며, 보안에 취약했음

현대의 배포 도구를 통해 웹 콘텐츠의 생성, 배포, 관리가 쉬워짐

## 19.1 배포 지원을 통한 FrontPage 서버 확장 
FrontPage(FP)는 다양한 기능을 제공하는 마이크로소프트사의 웹 개발 및 배포 도구 집합

1994년 버미어 테크놀로지스에서 FrontPage 1.0을 만들었으며 웹 사이트 관리와 제작을 모두할 수 있는 제품이었음

마이크로소프트가 1996년에 버미어를 인수해 FrontPage 1.1을 출시
### 19.1.1 FrontPage 서버 확장
"어디서든 배포한다"는 전략으로, 마이크로소프트는 FrontPage 서버 확장(FrontPage Server Extensions, FPSE)라는 서버 측 소프트웨어 제품군을 출시

서버 측 컴포넌트는 웹 서버와 통합되어 웹 사이트와 FrontPage를 구동시키는 클라이언트 사이에서 필요한 변환 작업을 수행

FrontPage 배포 프로토콜은 HTTP POST 요청 위에 RPC 계층을 구현하여 웹 사이트에 있는 문서를 갱신하고, 검색을 수행하고, 웹 개발자들 간에 공동 작업을 할 수 있게 FrontPage 클라이언트가 서버에 명령을 보낼 수 있음

웹 서버는 FPSE(마이크로소프트 IIS 서버가 아니면, CGI 구성으로 구현)에 맞춘 POST 요청을 받아 처리

클라이언트와 서버 사이에 방화벽과 프락시 서버가 있더라도 POST 메서드 통신만 할 수 있으면 FrontPage는 서버와 통신을 지속 가능
### 19.1.2 FrontPage 용어
#### 가상 서버
가상 서버는 웹 서버 한 개에서 웹 사이트 여러 개를 호스팅하며, 각 사이트는 브라우저에서 자체 전용 서버가 있는 것처럼 보임

가상 서버를 지원하는 웹 서버는 다중 호스팅(multi-hosting) 웹 서버, 여러 개의 IP 주소로 구성된 장비는 다중-홈(multi-homed) 서버
#### 루트 웹
보통 웹 서버의 최상위 콘텐츠 디렉터리이거나 다중 호스팅 환경에서 가상 웹 서버의 최상위 콘텐츠 디렉터리

루트 웹에 접근하려면 페이지명을 기술하지 않고 서버의 URL만 기술하면 됨

웹 서버에는 오직 한 개의 루트 웹만 존재
#### 서브 웹
루트 웹의 하위디렉터리거나 완전한 FPSE 확장 웹인 다른 서브 웹의 하위디렉터리

서브 웹은 관리나 저작의 권한을 자체적으로 제한하는 완전히 독립적인 엔터티가 될 수 있으며, 서브 웹은 검색 범위의 단위로 사용가능
### 19.1.3 FrontPage RPC 프로토콜
FrontPage 클라이언트와 FPSE는 자체 RPC 프로토콜을 사용해 통신

이 프로토콜은 RPC 메서드와 그와 관련한 변수를 POST 요청의 본문에 기술해서 HTTP POST를 감쌈
1. 클라이언트는 서버에 있는 대상 프로그램의 이름과 위치를 결정(POST 요청을 실행시킬 수 있는 FPSE 패키지의 일부). 이를 위해 클라이언트는 특별한 GET 요청을 보냄
2. 파일이 반환되면, FrontPage 클라이언트는 응답을 읽고 FPShtmlScriptUrl, FPAuthorScriptUrl, FPAdminScriptUrl와 관련된 값을 찾음
3. FPShtmlScriptUrl은 탐색 시간(browse time)과 저작 시간(authoring time) 명령, 관리 동작에 관한 POST 요청을 보낼 위치를 클라이언트에게 알려줌
#### 요청
POST 요청 본문에는 method=<command> 형식의 RPC 명령과 함께 필요한 모든 매개변수가 기술되어 있음
- service_name: 메서드가 수행되어야 하는 웹 사이트의 URL
- listHiddenDocs: 값이 true면 웹에 있는 숨겨진 문서가 보임
- listExploreDocs: 값이 true면 태스크 리스트를 나열
#### 응답
RPC 프로토콜 메서드 대부분은 반환 값이 있음

가장 일반적인 반환 값은 성공 메시지이와 에러

FrontPage는 사용자에게 정확한 응답을 주려고 코드를 적절히 해석
### 19.1.4 FrontPage 보안 모델
FPSE의 보안은 웹 서버에 의존하며, 사용자를 모든 제어 권한을 가지고 있는 관리자, 저작자, 브라우징 하는 일반 사용자로 정의하며 모든 권한은 누적됨

## 19.2 WebDAV와 공동 저작
웹 분산 저작과 버저닝(Web Distributed Authoring and Versioning, WebDAV)은 웹 배포 공동 작업에 대한 또 다른 영역을 개척함

WebDAV는 공동 저작에 적합한 플랫폼을 제공하기 위해 HTTP를 확장하는데 집중하였으며, 현재 여러 업체로부터 지원을 받으며 IETF아 협력 관계
### 19.2.1 WebDAV 메서드
#### PROPFIND
리소스의 속성을 읽음
#### PROPPATCH
한 개 이상의 리소스에 대한 한 개 이상의 속성을 설정
#### MKCOL
콜렉션(collection)을 생성
#### COPY
특정 원본지에서 특정 목적지로 리소스나 리소스의 집합을 복사
#### MOVE
특정 소스에서 특정 목적지에 리소스나 리소스의 집합을 이동시킴
#### LOCK
하나 이상의 리소스를 잠금
#### UNLOCK
기존에 잠겨있는 리소스를 잠금해제
### 19.2.2 WebDAV와 XML
WebDAV는 XML을 다음의 용도로 사용
- 데이터를 어떻게 처리할 것인지 설명하는 명령 포맷
- 서버의 복잡한 응답을 표현하는 데 사용하는 포맷
- 콜렉션과 리소스를 처리하는 데 사용하는 커스텀 정보 포맷
- 데이터 자체를 표현할 수 있는 유연한 포맷
- 대부분의 국제화 관련 문제에 대한 훌륭한 해결책

복잡한 XML 스키마는 WebDAV 명세서인 RFC 2518에 정의되어 있으며, 구분 분석(parsing) 소프트웨어가 DTD 파일을 읽고 정확히 해석할 필요없이 XML 스키마에서 데이터를 추정할 수 있게 함
### 19.2.3 WebDAV 헤더
#### DAV
WebDAV를 제공하는 서버와 통신할 때 사용
WebDAV에서 지원하는 모든 리소스는 OPTIONS 요청에 대한 응답에 이 헤더를 포함해야 함
#### Depth
여러 수준의 계층 구조로 분류된 리소스에 WebDAV를 사용하기 위한 중요한 요소
#### Destination
COPY나 MOVE 메서드가 목적지 URI를 식별하는데 쓰임
#### If
조건 집합을 정의
#### Lock-Token
제거되어야 할 잠금을 명시하는 용도로 UNLOCK 메서드에서 사용
#### Overwrite
대상을 덮어쓸 것인지 아닌지를 기술하는 데 쓰이며 COPY나 MOVE 메서드에서 사용
#### Timeout
클라이언트가 필요한 잠금 타임아웃 값을 기술하는데 사용하는 요청 헤더
### 19.2.4 WebDAV 잠금과 덮어쓰기 방지
### 19.2.5 LOCK 메서드
### 19.2.6 UNLOCK 메서드
### 19.2.7 속성과 META 데이터
### 19.2.8 PROPFIND 메서드
### 19.2.9 PROPPATCH 메서드 
### 19.2.10 콜렉션과 이름공간 관리
### 19.2.11 MKCOL 메서드 
### 19.2.12 DELETE 메서드
### 19.2.13 COPY와 MOVE 메서드
### 19.2.14 향상된 HTTP/1.1 메서드
### 19.2.15 WebDAV의 버전 관리
### 19.2.16 WebDAV의 미래
## 19.3 추가 정보
