# 19 배포 시스템

## 19.1 배포 지원을 위한 FrontPage 서버 확장

FP(FrontPage) 마이크로소프트사에서 웹 개발 및 배포 도구 집합.

### 19.1.1 FrontPage 서버 확장

어디서든 배포한다는 전략으로 FP 서버 확장 (FPSE, FrontPage Server Extensions)이라는 서버 측 소프트웨어 제품군을 출시함. 해당 배포 시 사용하는 프로토콜은 HTTP의 기본 의미를 바꾸지 않고 핵심 서비스 HTTP를 그대로 사용할 수 있게 확장을 설계한 좋은 사례.

- FP 배포 프로토콜은 HTTP POST 요청 위에 RPC 계층을 구현함. 이를 이용하면 웹 사이트에 있는 문서를 갱신하고 검색을 수행하고, 웹 개발자들 간에 공동 작업을 할 수 있게 FrontPage 클라이언트가 서버에 명령을 보낼 수 있음.
- 웹 서버 FPSE(MS ISS 서버가 아니면 CGI구성으로 구현)에 맞춘 POST요청을 받아 처리함. 클라이언트와 서버 사이에 방화벽과 프락시 서버가 있더라도 POST 메서드 통신만 할수 있으면 FP는 서버와 통신을 계속 할 수 있음.

### 19.1.2 FrontPage 용어

- 가상 서버
- 루트 웹
- 서브 웹

### 19.1.3 FrontPage RPC 프로토콜

FPSE는 자체 RPC 프로토콜을 사용해 통신함.

### 19.1.4 FrontPage 보안 모델

대부분의 경우 FPSE의 보안은 웹 서버에 의존함. FPSE 보안 모델은 사용자를 모든 제어 권한을 가진 관리자, 저작자, 브라우징 하는 일반 사용자와 같이 세 가지로 정의함.

## 19.2 WebDAV와 공동 저작

웹 분산 저장과 버저닝(Web Distributed Authoring and Versioning, WebDAV)

- 공동 저작에 적합한 플랫폼을 제공하고 HTTP를 확장하는데 집중함.
- 현재 어도비, 애플, IBM, 마이크로소프트, 넷스케이프, 노벨, 오라클, 제록스를 포함한 여러 업체로부터 지원을 받으며 IETF와 협력 관계에 있음.

### 19.2.1 WebDAV 메서드

PROPFIND, PROPPATCH, MKCOL, COPY, MOVE, LOCK, UNLOCK

### 19.2.2 WebDAV와 XML

WebDAV는 헤더에만 정보를 담아 전송하는 것에 대한 한계를 해결하기 위해 XML(Extensible Markup Language)을 지원함. 아래는 사용 용도임.

- 데이터를 어떻게 처리할 것인지 설명하는 명령 포맷
- 서버의 복잡한 응답을 표현하는 데 사용하는 포맷
- 콜렉션과 리소스를 처리하는 데 사용하는 커스텀 정보 포맷
- 데이터 자체를 표현할 수 있는 유연한 포맷
- 대부분의 국제화 관련 문제에 대한 훌륭한 해결책

### 19.2.3 WebDAV 헤더

DAV, Depth, Destination, If, Lock-Token, OverWrite, Timeout

### 19.2.4 WebDAV 잠금과 덮어쓰기 방지

공동 작업이란 주어진 문서에 한 명 이상의 사람이 붙어서 작업한다는 것. 이때 작업한 것이 덮어씌워지는 문제 발생. 해결하기 위해 WebDAV는 LOCK 개념을 지원함. 완벽한 해결책을 만들려면 버저닝과 메시징을 지원해야함. WebDAV는 두 가지 형식의 잠금을 지원함

- 리소스나 콜렉션에 대한 배타적 쓰기 잠금
- 리소스나 콜렉션에 대한 공유된 쓰기 잠금

### 19.2.5 LOCK 메서드

잠금을 수행하려면 저자를 식별하는 메커니즘이 필요함 WebDAV는 다이제스트 인증을 요구함.
잠금이 승인되면 서버는 도메인 전체에서 유일한 토큰을 클라이언트에 반환함.
명세에서는 opaquelocktoken 잠금 토큰 URI 스킴이라 부름. 이후에 클라이언트가 서버에 쓰기를 보내고자 할 때, 서버에 연결하고 다이제스트 인증을 수행함. 인증이 완료되면, WebDAV 클라이언트는 PUT 요청을 통해 잠금 토큰을 보냄. 쓰기를 하려면 이처럼 정확한 사용자와 잠금 토큰이 모두 결정돼야 함.

- <lockinfo> 구조안의 하위 요소 : `<locktype>`, `<lockscope>`, `<owner>`

### 19.2.6 UNLOCK 메서드

리소스에 있는 잠금을 제거함
상태코드로 잠금 성공 유무를 알려줌.

### 19.2.7 속성과 META 데이터

저작자 이름, 수정한 날짜, 내용 등급 등과 같은 리소스의 정보를 기술함.
속성의 발견과 수정을 지원하기 위해 WebDAV는 PROPFIND와 PROPPATCH라는 두 가지 새로운 메서드를 포함해 HTTP를 확장함.

### 19.2.8 PROPFIND 메서드

주어진 파일이나 파일 그룹(콜렉션)의 속성을 읽는 데 사용함.

- 모든 속성과 그 값을 요청함.
- 선택된 속성과 그 값의 집합을 요청함
- 모든 속성의 이름을 요청함.

### 19.2.9 PROPPATCH 메서드

특정 리소스의 여러 속성을 설정하거나 제거하는 원자적 메커니즘을 제공함. 원자성은 모든 요청이 성공하거나 모든 요청이 무효가 되거나 둘 중 하나만 수행하는 것을 보장함.

- PROPPATCH메서드의 기본 XML 요소는 <propertyupdate>는 업데이트가 필요한 모든 속성을 담는 컨테이너 역할을 함.
- PROPFIND와 PROPPATCH 요청에 대한 응답이 매우 유사함

### 19.2.10 콜렉션 이름과 공간 관리

사전에 정의한 계층에 있는 리소스들의 논리적 혹은 물리적 그룹.

### 19.2.11 MKCOL 메서드

클라이언트가 지정된 URL에 대한하는 콜렉션을 서버에 생성하게 함.
기존의 PUT, POST 메서드를 이용하면 완벽한 대체제를 만들 수 있음.

### 19.2.12 DELETE 메서드

디렉터리를 지울 경우 필요함.

### 19.2.13 COPY와 MOVE 메서드

COPY , MOVE 메서드의 대안이 있지만 다단계 콜렉션에 대한 COPY , MOVE 작업을 할 때 발생하는 문제들을 고려했을 때 확장이 쉽지 않음.
COPY , MOVE 는 요청 URL을 원본의 위치 정보로 사용하고 목적지인 Destination HTTP 헤더의 값을 목적지 정보로 사용함. MOVE메서드는 COPY 메서드에 이어 몇 가지 추가 작업을 수행함. 해당 추가 작업은 원본지 URL 목적지에 복사, 새로 생성된 URI무결성 검사, 원본을 지움. Depth에 무한대 값을 기술하는 것은 MOVE에서만 할 수 있음.

### 19.2.14 향상된 HTTP/1.1 메서드

### 19.2.15 WebDAV의 버전 관리

### 19.2.16 WebDAV의 미래

## 19.3 추가 정보
