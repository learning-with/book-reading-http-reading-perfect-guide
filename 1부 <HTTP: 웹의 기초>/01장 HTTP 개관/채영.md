# 01 HTTP 개관

Hypertext Transfer Protocol = 현대 인터넷 공용어

## 1.1 HTTP: 인터넷의 멀티미디어 배달부

HTTP는 신뢰성 있는 데이터 전송 프로토콜을 사용하기 때문에, 데이터가 지구 반대편에서 오더라도 전송 중 손상되거나 꼬이지 않음을 보장

## 1.2 클라이언트와 서버

HTTP 서버 : HTTP 프로토콜로 의사소통하는 웹서버, WWW의 기본 요소
"https://github.com/learning-with"페이지를 열 때 웹 브라우저는 HTTP 요청을 "https://github.com" 서버로 보낸다. 서버는 요청받는 객체 "/learning-with"를 찾고 성공하면 타입, 길이 등의 정보를 HTTP 응답에 실어서 클라이언트에게 보냄.

## 1.3 리소스

웹서버 : 웹리소스(= 웹 콘텐츠에 제공하는 모든 것) 관리

- 리소스는 정적파일이 가장 단순한 웹서버 파일 시스템이지만 요청에 따라 콘텐츠 생산하는 프로그램이 될 수도 있다. = 어떤 종류의 콘텐츠 소스도 리소스가 될 수 있음

### 1.3.1 미디어 타입

`MIME` multipurpose internet Mail extentions

- MIME를 데이터 포맷 라벨로 사용. 이메일에서 써보니 잘 동작해서 HTTP에서도 멀티미디어 콘텐츠를 기술하고 라벤을 붙이기 위해 채택됨.
- 웹브라우저는 서버로부터 객체를 돌려받을때, 다룰 수 있는 객체인지 MIME 타입을 통해 확인.
- MIME타입은 사선`/`으로 구분된 주 타입과 부 타입으로 이루어진 문자열 라벨. (ex. `text/html`,`text/plain`, `image/jpeg`, `image/gif`, `video/quicktime`, `application/vnd.ms-powerpoint`)

### 1.3.2 URI

통합 자원 식별자 Uniform Resource Identifier = 서버 리소스

- 인터넷 우편물 주소
- 정보 리소스를 고유하게 식별 및 위치 지정 가능(클라이언트는 관심있는 리소르를 지목가능)
- URI는 URL과 URN으로 나뉨

### 1.3.3 URL

통합 자원 지시자 Uniform Resource Locator = 리소스 식별자

- 특정 서버의 한 리소스에 대한 구체적인 위치 서술
- URL은 세 부분으로 이루어진 표준 포맷
  ![url구조](https://github.com/learning-with/book-reading-http-reading-perfect-guide/assets/124546770/3acf2ead-a606-404f-a787-376b3af14b4d)
- 첫번째 부분 스킴(scheme) : 리소스에 접근하기 위해 사용되는 프로토콜을 서술 (`http://`, `ftp://`등)
- 두번째 부분 서버의 인터넷 주소를 제공 (`github.com`)
- 마지막은 웹 서버의 리소스를 가리킴 (`/learning-with/book-reading-http-reading-perfect-guide/sajlfsadf.gif`)

### 1.3.4 URN

유니폼 리소스 이름 Uniform Resource Name = 리소스 위치에 영향 받지 않는 유일무이한 이름 역할을 함

- urn은 리소스를 여기저기로 옯기더라도 문제없이 동작
- 리소스가 이름이 변하지 않게 유지한다면 여러 종류의 네트워크 접속 프로토콜로 접근해도 문제없음
- 아직 테스트 중

## 1.4 트랜잭션

HTTP 트랜잭션은 요청 명령 + 응답 결과로 구성돼 있음. 이 상호 작용은 정형화된 데이터 덩어리인 HTTP 메시지를 이용해 이루어짐

### 1.4.1 메서드

서버에게 어떤 동작이 취해져야 하는지 말해줌.
`GET`, `PUT`,`DELETE`, `POST`, `HEAD`

### 1.4.2 상태코드

- 모든 HTTP 응답 메시지는 상태코드와 함께 반환됨. `200`, `302`, `404` 등
- HTTP 소프트웨어는 상태코드와 사유 구절(reason phrase)을 모두 같은 것으로 취급. (200 = `Ok`, `Cocument attached`, `Success`, `All's cool`, `dude`)

### 1.4.3 웹페이지는 여러 객체로 이루어질 수 있다

하나의 작업을 수행하기 위해 여러 HTTP 트랜잭션을 수행함. 웹페이지는 하나의 리소스가 아닌 리소스 모음

## 1.5 메시지

HTTP 메시지는 시작줄, 헤더, 본문으로 나뉨

- 시작줄 : 요청/응답 일 경우에 따라 무엇을 해야하는지/무슨 일이 일어났는지 표시
- 헤더 : 시작줄 다음에 0개이상의 헤더 필드가 이어짐. 각 헤더 필드는 쉬운 구문 분석을 위해 쌍점`:`으로 구분되어 있는 하나의 이름과 하나의 값으로 구성됨. 헤더 필드를 추가하려면 한 줄을 더 하기만 하면 끝. 헤더는 빈 줄로 끝남
- 본문 : 빈 줄 다음으로 어떤 종류의 데이터든 들어갈 수 있는 메시지 본문이 필요에 따라 올 수 있음. 본문은 임의의 이진 데이터를 포함할 수 있음.

### 1.5.1 간단한 메시지의 예

## 1.6 TCP 커넥션

Transmission Control Protocol 전송 제어 프로토콜 커넥션

- 메시지는 TCP 커넥션을 통해 한 곳에서 다른 곳으로 옮겨감

### 1.6.1 TCP/IP

HTTP는 애플리케이션 계층 프로토콜. HTTP는 네트워크 통신의 핵심적인 세부사항에 대해서 신경쓰지 않고 TCP/IP에게 세부사항을 맡김.

- 오류 없는 데이터 전송
- 순서에 맞는 전달(데이터는 언제나 순서에 맞게 도착)
- 조각나지 않는 데이터 스트림(언제든 어떤 크기로든 보낼 수 있음)

#### 대중적으로 사용되는 TCP/IP

TCP/IP는 TCP와 IP가 층을 이루는 패킷 교환 네트워크 프로토콜의 집합. 각 네트워크와 하드웨어의 특성을 숨기고, 어떤 종류의 컴퓨터나 네트워크든 서로 신뢰성 있는 의사소통을 할수 있게 해줌. TCP 커넥션이 맺어지면 클라이언트와 서버 컴퓨터 간에 교환되는 메시지가 분실, 손상, 순서가 뒤바뀌어 수신되는 일은 결코 없다.

> #### HTTP 네트워크 프로토콜 스택
>
> - HTTP 애플리케이션 계층
> - TCP 전송 계층
> - IP 네트워크 계층
> - 네트워크를 위한 링크 인터페이스 : 데이터 링크 계층
> - 물리적인 네트워크 하드웨어 : 물리 계층

### 1.6.2 접속, IP 주소 그리고 포트번호

TCP애서 서버 컴퓨터에 대한 IP 주소와 그 서버에서 실행 중인 프로그램이 사용 중인 포트번호가 필요.

- 포트번호는 IP주소나, IP주소에 대한 이해하기 쉬운 형태의 별명인 호스트 명(`DNS`, Domain name service)으로 알 수 있음.
- URL에 포트번호가 빠진 경우는 기본값 80포트 사용

### 1.6.3 텔넷(Telnet)을 이용한 실제 예제

[텔넷](https://ko.wikipedia.org/wiki/%ED%85%94%EB%84%B7)
텔넷은 인터넷이나 로컬 영역 네트워크 연결에 쓰이는 네트워크 프로토콜이다. RFC15를 시작으로 1969년에 개발되었으며 최초의 인터넷 표준들 가운데 하나로서 IETF STD 8로 표준화됐다. telnet이라는 용어는 프로토콜의 클라이언트 일부 기능이 추가된 소프트웨어를 일컫는다.

## 1.7 프로토콜 버전

## 1.8 웹의 구성요소

- 프락시
- 캐시
- 게이트웨이
- 터널
- 에이전트

### 1.8.1 프락시

클라이언트와 서버 사이에 위치한 신뢰할 만한 중재자 역할. 주로 보안을 위해 사용됨.

### 1.8.2 캐시

웹 캐시와 캐시 프락시는 웹페이지를 클라이언트 가까이에 저장하는 HTTP 창고. HTTP는 캐시를 효율적으로 동작하게 하고 캐시된 콘텐츠를 최신 버전으로 유지하면서 동시에 프라이버시도 보호하기 위한 많은 기능을 정의.

### 1.8.3 게이트웨이

다른 서버들 간의 중재자로 동작하는 서버. HTTP트래픽을 다른 프로토콜로 변환하기 위해 사용됨. 게이트웨이는 언제나 스스로가 리소스를 갖고 있는 진짜 서버인 것처럼 요청을 다룸.

- HTTP/FTP 게이트웨이는 FTP URI에 대한 HTTP 요청을 반아들인 뒤, FTP 프로토콜을 이용해 문서를 가져옴. 받아온 문서는 HTTP 메시지에 담겨 클라이언트에게 보냄.

### 1.8.4 터널

두 커넥션 사이에서 날(raw)데이터를 열어보지 않고 그대로 전달해주는 HTTP 애플리케이션. HTTP 터널은 주로 비 HTTP 데이터를 하나 이상 HTTP 연결을 통해 그대로 전송해주기 위해 사용됨.

- 대표적인 예 : 암호화된 SSL 트래픽을 웹 트래픽만 허용하는 사내 방화벽을 통과시키는 것.

### 1.8.5 에이전트

사용자를 위해 HTTP 요청을 만들어주는 클라이언트 프로그램.(스파이더, 웹로봇 등)

- 검색엔진의 데이터베이스나 가격비교 로봇을 위한 제품 카탈로그와 같은 유용한 웹 콘텐츠 보관소를 만듬.

## 1.9 시작의 끝

## 1.10 추가 정보

### 1.10.1 HTTP프로토콜에 대한 정보

### 1.10.2 역사적 시각

### 1.10.3 기타 월드 와이드 웹 정보
